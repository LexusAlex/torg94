Структура, что есть

record - все записи
id - номер записи
title - заголовок записи
date - дата публикации
archive - архив - не используется
author - автор
link - ссылка
picture_annotation - не используется
picture_text - картинка к публикации
annotation - аннотация
text - текст публикации
tid - тип публикации 1 - новость 2 - статья 3 - закон
type - не используется

type - тип записи
id
title заголовок

У статей есть категории к которым она может принадлежать их несколько
Категории будут иметь значения только при выборе типа публикации статья
category - Категории
    id - Номер категории (pk)
    name - Название тега

record_category - Связь категорий и статей
    record_id - Номер статьи (int)
    category_id - Номер категории (int)

Генератор паролей когда нужно сгенерировать
auth_key Yii::$app->security->generateRandomString();
pssword Yii::$app->security->generatePasswordHash($password)


$s = array(
            array('email' => 'alexsey_89@bk.ru','status' => '1')
        );

        $p = array_pad($s,100,['email' => 'alexsey_89@bk.ru','status' => '1']);
        //var_dump($p);
        foreach ($p as $v) {
            /*$email = (string)$v['email'];
            $status = (int)$v['status'];
            $customer = new Subscribe();
            $customer->email = $email;
            $customer->status = $status;
            $customer->insert();*/
        }
        /*Yii::$app->mailer->compose()
            ->setFrom('lexuss1989@yandex.ru')
            ->setTo('alexsey_89@bk.ru')
            ->setSubject('Тема сообщения')
            ->setTextBody('Текст сообщения')
            ->setHtmlBody('<b>текст сообщения в формате HTML</b>')
            ->send();*/


        $users = Subscribe::find()->where('status = 1')->all();

        $messages = [];
        foreach ($users as $user) {
            $messages[] = Yii::$app->mailer->compose()
                ->setFrom('lexuss1989@yandex.ru')
                ->setTo($user->email)
                ->setSubject('Тема сообщения')
                ->setTextBody($user->status)
                ->setHtmlBody('<b>текст сообщения в формате HTML</b>');
        }
        Yii::$app->mailer->sendMultiple($messages);
=======
Порядок развертывания на 26 января 2017 с нуля
На хостинге должен быть ssh git composer
1. Актуальная база а именно одна таблица NA_news(record) скачать используя параметры только данные формат zip только после распаковки размер должен быть ~40мб
2. Замена во всем файле ctrl + H
    `NA_news` (`id`, `spot`, `data`, `archive`, `author`, `ahref`, `pic1`, `pic2`, `annot`, `text`, `cID`, `type`)
    на
    `record` (`id`, `title`, `date`, `archive`, `author`, `link`, `picture_annotation`, `picture_text`, `annotation`, `text`, `tid`, `type`)
3. Удалить все таблицы в базе или создать бд если ее еще нет
4. git clone,composer update и выбрать режим dev prod
5. Прописать конфиги и симлинки
6. Запустить миграции все миграции должны быть актуальными
7. Залить дамп таблицы record с переименованными колонками должно все залится без ошибок, может понадобиться сжать sql фаил
8. Скопировать все изображения со старого сайта
9. Удалить и заменить на новые изображения, путем копирования без гита
10. Добавить вручную пользователя для авторизации на сайте
11. Залить дамп емайлов для рассылки в таблицу subscribe

Повторный деплой - полный
1. включить ssh
2. git pull
3. удалить таблицы в бд
4. Запустить миграции
5. Залить/обновить дапм таблицы record
6. Добавить вручную запись для авторизации пользователя
7. выключить ssh

Повторный деплой - частый
1. включить ssh
2. git pull в директории
3. если нужно запуск миграции
4. выключить ssh
=======
Backend and Frontend
#1 - Добавить htaccess и настроить корневую деректорию в хостах
#2 - Планирование структуры, схема бд , Таблица Record и Type , создание миграций
#3 - Создание таблиц Record и Type
#4 - Приводим в порядок внешний вид отображение общей таблицы всех записей record/index
        Статусы
            0 - Не опубликован
            1 - Опубликован
            2 - Черновик
        Типы публикаций
            1 - Новости
            2 - Статьи
            3 - Законы
            4 - Электронная подпись
            7 - Услуги
#5 - Функционал загрузки фото на сервер
#6 - Приводим в порядок страницу record/update
#7 - Правим страницу просмотр record/view

#8 - Планирование структуры - 0.15 минут
#9 - Приводим в порядок главную страницу + вывод 5 последних новостей + натягивание дизайна 1.40
#10 - Создать таблицы category и record_category для статей и генерируем модели 2.20
#11 - Делаем функционал с сохранением связанных записей 3.00

#12 - Правка багов - 30 мин
#13 - Отображние новостей - 2.50
#14 - Создание страниц категорий - 2.00
#15 - Загрузка файлов из формы - 0.30
#16 - Раздел со спецпроектами и таблица для рассылки новостей - 2.00
+300 р за хостинг
